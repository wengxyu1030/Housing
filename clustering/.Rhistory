cbind(mat_k_clst$modes)
set.seed(40)
mat_clst <- nss76 %>%
dplyr::select(b7_14,b7_15,b7_16)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
mat_clst$size %>%
cluster_ratio()%>%
cbind(mat_clst$modes)
set.seed(41)
mat_clst <- nss76 %>%
dplyr::select(b7_14,b7_15,b7_16)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
mat_clst$size %>%
cluster_ratio()%>%
cbind(mat_clst$modes)
set.seed(40)
mat_k_r_clst <- nss76 %>%
dplyr::select(b7_14,b7_15,b7_16,b7_12,b7_1)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
mat_k_r_clst$size %>%
cluster_ratio()%>%
cbind(mat_k_r_clst$modes)
set.seed(40)
mat_k_r_clst <- nss76 %>%
dplyr::select(b7_14,b7_15,b7_16,b7_12,b7_1)%>%
kmodes(.,4,iter.max = 10, weight = FALSE)
mat_k_r_clst$size %>%
cluster_ratio()%>%
cbind(mat_k_r_clst$modes)
#cluster on material (wall, roof, floor), kitchen, room
set.seed(40)
mat_k_r_clst <- nss76 %>%
dplyr::select(b7_14,b7_15,b7_16,b7_12,in_room_grp)%>%
kmodes(.,4,iter.max = 10, weight = FALSE)
mat_k_r_clst$size %>%
cluster_ratio()%>%
cbind(mat_k_r_clst$modes)
set.seed(40)
mat_w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
kmodes(.,2,iter.max = 10, weight = FALSE)
mat_w_s_clst$size %>%
cluster_ratio()%>%
cbind(mat_k_r_clst$modes)
set.seed(40)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
kmodes(.,2,iter.max = 10, weight = FALSE)
w_s_clst$size %>%
cluster_ratio()%>%
cbind(w_s_clst$modes)
set.seed(40)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
kmodes(.,2,iter.max = 10, weight = FALSE)
set.seed(40)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
nss76 %>%
dplyr::select(b5_1,b5_26)
nss76 %>%
dplyr::select(b5_1,b5_26)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
test <- nss76 %>%
dplyr::select(b5_1,b5_26)
test
distinct(test)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
na.omit()%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
w_s_clst$size %>%
cluster_ratio()%>%
cbind(w_s_clst$modes)
set.seed(41)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
na.omit()%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
w_s_clst$size %>%
cluster_ratio()%>%
cbind(w_s_clst$modes)
set.seed(42)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
na.omit()%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
w_s_clst$size %>%
cluster_ratio()%>%
cbind(w_s_clst$modes)
set.seed(40)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
na.omit()%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
w_s_clst$size %>%
cluster_ratio()%>%
cbind(w_s_clst$modes)
set.seed(40)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
na.omit()%>%
kmodes(.,2,iter.max = 10, weight = FALSE)
w_s_clst$size %>%
cluster_ratio()%>%
cbind(w_s_clst$modes)
set.seed(40)
w_s_clst <- nss76 %>%
dplyr::select(b5_1,b5_26)%>%
na.omit()%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
w_s_clst$size %>%
cluster_ratio()%>%
cbind(w_s_clst$modes)
set.seed(40)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,4,iter.max = 10, weight = FALSE)
all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
set.seed(40)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
ind <- c("b7_14","b7_15","b7_16", #floo,rwall,roof
"b7_12","b7_1",          #kitchen_sep, flat,
"in_room_grp",           #room category
"b5_1","b5_26")          #warer, sanitation
set.seed(40)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,4,iter.max = 10, weight = FALSE)
all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
clst_final <-all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
clst_final
clst_final %>%
arrange(b7_14,b7_15)
clst_final %>%
arrange(b7_14,b7_15, b7_17)
clst_final %>%
arrange(b7_14,b7_15, b7_16)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)%>%
select(everything(),b5_26,b5_1)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)%>%
dplyr::select(everything(),b5_26,b5_1)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)%>%
dplyr::select(everything(),b5_1)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)%>%
dplyr::select(-b5_1,b5_1)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)%>%
dplyr::select(-b5_1,b5_1) %>%
rename(b7_14 = wall)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)%>%
dplyr::select(-b5_1,b5_1) %>%
rename(wall = b7_14,
floor = b7_15,
roof = b7_16,
sep_kit = b7_12,
dwell_type = b7_1,
latrine = b5_26,
water_source = b5_1)
nss76_raw <- read.dta13(paste0(data_path,"/NSS76_All_clst_u.dta"))
nss76 <- nss76_raw %>%
rename(wall = b7_14,
floor = b7_15,
roof = b7_16,
sep_kit = b7_12,
dwell_type = b7_1,
latrine = b5_26,
water_source = b5_1)
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
clst_final <-all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)%>%
dplyr::select(-b5_1,b5_1)
nss76 <- nss76_raw %>%
rename(wall = b7_14,
floor = b7_15,
roof = b7_16,
kit_type = b7_12,
dwell_type = b7_1,
latrine = b5_26,
water_source = b5_1)
ind <- c("wall","floor","roof", #floo,rwall,roof
"kit_type","dwell_type",          #kitchen_sep, flat,
"in_room_grp",           #room category
"water_source","latrine")          #warer, sanitation
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
clst_final <-all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
clst_final %>%
arrange(b7_14,b7_15, b7_16,-b7_12)%>%
dplyr::select(-b5_1,b5_1)
clst_final
clst_final %>%
arrange(wall,floor, roof,-dwell_type)%>%
dplyr::select(-water_source,water_source)
clst_final %>%
arrange(wall,floor, roof,-dwell_type, dwell_type)%>%
dplyr::select(-water_source,water_source)
clst_final %>%
arrange(wall,floor, roof,-kit_type)%>%
dplyr::select(-water_source,water_source)
nss76 <- nss76_raw %>%
rename(floor = b7_14,
wall = b7_15,
roof = b7_16,
kit_type = b7_12,
dwell_type = b7_1,
latrine = b5_26,
water_source = b5_1)
ind <- c("floor","wall","roof", #floo,rwall,roof
"kit_type","dwell_type",          #kitchen_sep, flat,
"in_room_grp",           #room category
"water_source","latrine")          #warer, sanitation
clst_final %>%
arrange(floor, wall,roof,-kit_type)%>%
dplyr::select(-water_source,water_source)
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
clst_final <-all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
clst_final %>%
arrange(floor, wall,roof,-kit_type)%>%
dplyr::select(-water_source,water_source)
clst_final %>%
arrange(floor, wall,roof,-kit_type,dwell_type)%>%
dplyr::select(-water_source,water_source)
View(clst_final)
View(all_clst)
#statistics by cluster-----
nss76_clst <- nss76 %>%
filter_ll(vars(ind),!is.na())
#statistics by cluster-----
nss76_clst <- nss76 %>%
filter_all(vars(ind),!is.na())
#statistics by cluster-----
nss76_clst <- nss76 %>%
filter_at(vars(ind),!is.na())
#statistics by cluster-----
nss76_clst <- nss76 %>%
filter_at(vars(ind),!is.na())
#statistics by cluster-----
nss76_clst <- nss76 %>%
filter_at(vars(ind),any_vars(!is.na()))
#statistics by cluster-----
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),any_vars(!is.na()))
#statistics by cluster-----
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),any_vars(!is.na(.)))
#statistics by cluster-----
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))
count(nss76_clst)
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),any_vars(!is.na(.)))
count(nss76_clst)
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))
#statistics by cluster-----
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))%>%
cbind(all_clst$cluster)
names(nss76_clst)
View(nss76)
nss76_clust%>% select(all_clst$cluster)
nss76_clst$`all_clst$cluster`
#statistics by cluster-----
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))%>%
cbind(all_clst$cluster) %>%
rename(cluster = `all_clst$cluster`) %>%
group_by(cluster) %>%
dplyr::summarise_at(vars(hq_nslum,legal_own,hh_size,hh_umce_ln,crowd_room),funs(weighted.mean(.,w=hh_weight, na.rm = TRUE)))
#statistics by cluster-----
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))%>%
cbind(all_clst$cluster) %>%
rename(cluster = `all_clst$cluster`) %>%
group_by(cluster) %>%
dplyr::summarise_at(vars(hq_nslum,legal_own,hh_size,hh_umce_ln,crowd_room),funs(weighted.mean(.,w=hh_weight, na.rm = TRUE)))
#statistics by cluster-----
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))%>%
cbind(all_clst$cluster) %>%
rename(cluster = `all_clst$cluster`) %>%
group_by(cluster) %>%
dplyr::summarise_at(vars(hq_nslum,legal_own,hh_size,hh_umce_ln,crowd_room),funs(weighted.mean(.,w=hh_weight, na.rm = TRUE)))
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))%>%
cbind(all_clst$cluster) %>%
rename(cluster = `all_clst$cluster`) %>%
group_by(cluster) %>%
dplyr::summarise_at(vars(hq_nslum,legal_own,hh_size,hh_umce_ln,crowd_room),funs(weighted.mean(.,w=hh_weight, na.rm = TRUE)))
nss76_clst
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))%>%
cbind(all_clst$cluster) %>%
rename(cluster = `all_clst$cluster`)
nss76_clst%>%
group_by(cluster) %>%
dplyr::summarise_at(vars(hq_nslum,legal_own,hh_size,hh_umce_ln,crowd_room),funs(weighted.mean(.,w=hh_weight, na.rm = TRUE)))
nss76_clst <- nss76 %>%
dplyr::filter_at(vars(ind),all_vars(!is.na(.)))%>%
cbind(all_clst$cluster) %>%
rename(cluster = `all_clst$cluster`)
nss76_clst%>%
group_by(cluster) %>%
dplyr::summarise_at(vars(hq_nslum,legal_own,hh_size,hh_umce_ln,crowd_room),funs(weighted.mean(.,w=hh_weight, na.rm = TRUE)))
View(clst_final)
View(all_clst)
all_clst
all_clst$size
all_clst$size %>% t()
all_clst$size %>% t() %>% t()
all_clst$size %>% t() %>% t() %>% as.data.frame()
#cluster--------------
#function
cluster_ratio <- function(cluster){
cluster %>%
t() %>% t() %>%
as.data.frame()%>%
summarise(cluster = mean(cluster),
ratio = round(Freq/sum(Freq)*100,digits = 2))
}
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
clst_final <-all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes) %>%
clst_final %>%
arrange(floor, wall,roof,-kit_type,dwell_type)%>%
dplyr::select(-water_source,water_source)
#cluster--------------
#function
cluster_ratio <- function(cluster){
cluster %>%
t() %>% t() %>%
as.data.frame()%>%
summarise(cluster = mean(cluster),
ratio = round(Freq/sum(Freq)*100,digits = 2))
}
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
clst_final <-all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes) %>%
clst_final %>%
arrange(floor, wall,roof,-kit_type,dwell_type)%>%
dplyr::select(-water_source,water_source)
set.seed(41)
mat_clst <- nss76 %>%
dplyr::select(b7_14,b7_15,b7_16)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
mat_clst$size %>%
cluster_ratio()%>%
cbind(mat_clst$modes)
cluster_ratio <- function(cluster){
cluster %>%
t() %>% t() %>%
as.data.frame()%>%
summarise(cluster = mean(cluster,rm.na =TRUE),
ratio = round(Freq/sum(Freq)*100,digits = 2))
}
#cluster on material (wall, roof, floor)
set.seed(41)
mat_clst <- nss76 %>%
dplyr::select(b7_14,b7_15,b7_16)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
#cluster--------------
#function
cluster_ratio <- function(cluster){
cluster %>%
t() %>% t() %>%
as.data.frame()%>%
summarise(ratio = round(Freq/sum(Freq)*100,digits = 2))
}
#cluster on material (wall, roof, floor)
set.seed(41)
mat_clst <- nss76 %>%
dplyr::select(floor,wall,roof)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
mat_clst$size %>%
cluster_ratio()%>%
cbind(mat_clst$modes)
#cluster on material (wall, roof, floor)
set.seed(41)
mat_clst <- nss76 %>%
dplyr::select(floor,wall,roof)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
mat_clst$size %>%
cluster_ratio()%>%
cbind(mat_clst$modes)
set.seed(40)
mat_k_clst <- nss76 %>%
dplyr::select(floor,wall,roof,kit_type)%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
mat_k_clst$size %>%
cluster_ratio()%>%
cbind(mat_k_clst$modes)
set.seed(40)
mat_k_clst <- nss76 %>%
dplyr::select(floor,wall,roof,kit_type)%>%
kmodes(.,4,iter.max = 10, weight = FALSE)
mat_k_clst$size %>%
cluster_ratio()%>%
cbind(mat_k_clst$modes)
#cluster on material (wall, roof, floor), kitchen, room
set.seed(40)
mat_k_r_clst <- nss76 %>%
dplyr::select(floor,wall,roof,kit_type,in_room_grp)%>%
kmodes(.,4,iter.max = 10, weight = FALSE)
mat_k_r_clst$size %>%
cluster_ratio()%>%
cbind(mat_k_r_clst$modes)
#cluster on water and sanitation
set.seed(40)
w_s_clst <- nss76 %>%
dplyr::select(water_source,latrine)%>%
na.omit()%>%
kmodes(.,3,iter.max = 10, weight = FALSE)
w_s_clst$size %>%
cluster_ratio()%>%
cbind(w_s_clst$modes)
#cluster all indicators
set.seed(40)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,4,iter.max = 10, weight = FALSE)
all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
clst_final <-all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes) %>%
set.seed(41)
all_clst <- nss76 %>%
dplyr::select(ind)%>%
na.omit()%>%
kmodes(.,5,iter.max = 10, weight = FALSE)
clst_final <-all_clst$size %>%
cluster_ratio()%>%
cbind(all_clst$modes)
clst_final %>%
arrange(floor, wall,roof,-kit_type,dwell_type)%>%
dplyr::select(-water_source,water_source)
